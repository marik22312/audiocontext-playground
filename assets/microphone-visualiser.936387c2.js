import"./modulepreload-polyfill.b7f2da20.js";import{c as i,d,s as u}from"./waveform.f9b347fa.js";const m=async t=>{const o=await navigator.mediaDevices.getUserMedia({audio:!0});return{source:new MediaStreamAudioSourceNode(t,{mediaStream:o}),mediaStream:o}},e=document.querySelector("#start"),n=document.querySelector("#canvas"),c=document.querySelector("#barCanvas");if(!n||!e||!c)throw new Error("Canvas not found");let a,s;const v=async()=>{a=new AudioContext;const{source:t,mediaStream:o}=await m(a);s=o;const r=new GainNode(a,{gain:1});t.connect(r),i(r,a,n),d(a,r,c)},l=()=>{u(),s.getTracks().forEach(t=>t.stop())};e.addEventListener("click",()=>{e.innerText==="Start"?(e.innerText="Stop",e.classList.add("active"),v()):(e.innerText="Start",e.classList.remove("active"),l())});
